<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>二维变换 | Jiahao Peng</title>
  <meta name="author" content="me">
  
  <meta name="description" content="01 平移
通过将坐标轴加上位移量，可以实现一次平移。对二维图像的平移可以转换为对其端点的平移。设某点的坐标为
(x,y)，将其 x
轴坐标平移 tx 个单位，y
轴坐标平移 ty
个单位，得到新坐标 (x+tx,y+ty)，记为
(x′,y′)，其中，tx 和 ty
称为平移距离，(tx,ty)
称为平移向量，将它们转换为矩阵形式： $$
\begin{aligned}
P=\begin{bmatrix} x \\ y \end{bmatrix},P^\prime=\begin{bmatrix} x^\prime
\\ y^\prime \end{bmatrix},T=\begin{bmatrix} t_x \\ t_y \end{bmatrix}
\end{aligned}
$$ 这样就可以用矩阵形式来表示二维平移方程： P′ = P + T">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="二维变换"/>
  <meta property="og:site_name" content="Jiahao Peng"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Jiahao Peng" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/lumen.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
  
  <!-- analytics -->
  



<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Jiahao Peng</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      


	
		<div class="page-header page-header-inverse ">		
			<h1 class="title title-inverse "> 二维变换</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h2 id="平移">01 平移</h2>
<p>通过将坐标轴加上位移量，可以实现一次<strong>平移</strong>。对二维图像的平移可以转换为对其端点的平移。设某点的坐标为
<span class="math inline">(<em>x</em>,<em>y</em>)</span>，将其 x
轴坐标平移 <span
class="math inline"><em>t</em><sub><em>x</em></sub></span> 个单位，y
轴坐标平移 <span
class="math inline"><em>t</em><sub><em>y</em></sub></span>
个单位，得到新坐标 <span
class="math inline">(<em>x</em>+<em>t</em><sub><em>x</em></sub>,<em>y</em>+<em>t</em><sub><em>y</em></sub>)</span>，记为
<span
class="math inline">(<em>x</em><sup>′</sup>,<em>y</em><sup>′</sup>)</span>，其中，<span
class="math inline"><em>t</em><sub><em>x</em></sub></span> 和 <span
class="math inline"><em>t</em><sub><em>y</em></sub></span>
称为<strong>平移距离</strong>，<span
class="math inline">(<em>t</em><sub><em>x</em></sub>,<em>t</em><sub><em>y</em></sub>)</span>
称为<strong>平移向量</strong>，将它们转换为矩阵形式： <span
class="math display">$$
\begin{aligned}
P=\begin{bmatrix} x \\ y \end{bmatrix},P^\prime=\begin{bmatrix} x^\prime
\\ y^\prime \end{bmatrix},T=\begin{bmatrix} t_x \\ t_y \end{bmatrix}
\end{aligned}
$$</span> 这样就可以用矩阵形式来表示二维平移方程： <span
class="math display"><em>P</em><sup>′</sup> = <em>P</em> + <em>T</em></span></p>
<span id="more"></span>
<h2 id="旋转">02 旋转</h2>
<p>通过指定<strong>旋转轴</strong>和<strong>旋转角度</strong>，可以实现一次<strong>旋转</strong>。利用三角函数，我们可以得到一个点围绕某个轴旋转后的坐标，以下图为例：</p>
<p><img src="/img/计算机图形学-17.png" /></p>
<p>该图中，长度为 <span class="math inline"><em>r</em></span>
的线段围绕原点逆时针旋转角度 <span
class="math inline"><em>θ</em></span>，与 <span
class="math inline"><em>x</em></span> 轴所成角度由 <span
class="math inline"><em>ϕ</em></span> 变成 <span
class="math inline"><em>ϕ</em> + <em>θ</em></span>，上端点 <span
class="math inline">(<em>x</em>,<em>y</em>)</span> 移动至 <span
class="math inline">(<em>x</em><sup>′</sup>,<em>y</em><sup>′</sup>)</span>，可以得到以下关系：
<span class="math display">$$
\begin{aligned}
&amp;x^\prime=r\cos(\phi+\theta)=r\cos\phi\cos\theta-r\sin\phi\sin\theta\\
&amp;y^\prime=r\sin(\phi+\theta)=r\cos\phi\sin\theta+r\sin\phi\cos\theta
\end{aligned}
$$</span> 原本的坐标满足以下关系： <span class="math display">$$
\begin{aligned}
&amp;x=r\cos\phi\\
&amp;y=r\sin\phi
\end{aligned}
$$</span> 将其带入之前的式子就可以得到： <span class="math display">$$
\begin{aligned}
&amp;x^\prime=x\cos\theta-y\sin\theta\\
&amp;y^\prime=x\sin\theta+y\cos\theta
\end{aligned}
$$</span> 同样，如果我们把上面的信息转换为矩阵： <span
class="math display">$$
\begin{aligned}
P=\begin{bmatrix} x \\ y \end{bmatrix},P^\prime=\begin{bmatrix} x^\prime
\\ y^\prime \end{bmatrix}=\begin{bmatrix} x\cos\theta-y\sin\theta \\
x\sin\theta+y\cos\theta \end{bmatrix},R=\begin{bmatrix} \cos\theta &amp;
-\sin\theta \\ \sin\theta &amp; \cos\theta \end{bmatrix}
\end{aligned}
$$</span> 其中，<span class="math inline"><em>P</em><sup>′</sup></span>
就被称为<strong>旋转矩阵</strong>，于是就可以得到矩阵形式的二维旋转方程：
<span
class="math display"><em>P</em><sup>′</sup> = <em>R</em><em>P</em></span>
上例展示的是以原点为中心旋转的情况，如果是以任意坐标 <span
class="math inline">(<em>x</em><sub><em>r</em></sub>,<em>y</em><sub><em>r</em></sub>)</span>
作为旋转中心，则式子将会发生下面的变化： <span class="math display">$$
\begin{aligned}
&amp;x^\prime-x_r=(x-x_r)\cos\theta-(y-y_r)\sin\theta\Rightarrow
x^\prime=x_r+(x-x_r)\cos\theta-(y-y_r)\sin\theta\\
&amp;y^\prime-y_r=(x-x_r)\sin\theta+(y-y_r)\cos\theta\Rightarrow
y^\prime=y_r+(x-x_r)\sin\theta+(y-y_r)\cos\theta
\end{aligned}
$$</span> 以上就是通用的二维旋转方程。</p>
<h2 id="缩放">03 缩放</h2>
<p>改变一个图形的大小可以使用<strong>缩放</strong>。缩放的本质其实就是在原本坐标的基础上，给横纵坐标分别乘上一个<strong>缩放系数</strong>
<span class="math inline"><em>s</em><sub><em>x</em></sub></span> 和
<span
class="math inline"><em>x</em><sub><em>y</em></sub></span>，于是有公式：
<span class="math display">$$
\begin{aligned}
&amp;x^\prime=x·s_x\\
&amp;y^\prime=y·s_y
\end{aligned}
$$</span> 同样，我们将其化为矩阵形式： <span class="math display">$$
\begin{aligned}
\begin{bmatrix} x^\prime \\ y^\prime \end{bmatrix}=\begin{bmatrix} s_x
&amp; 0 \\ 0 &amp; s_y \end{bmatrix}·\begin{bmatrix} x \\ y
\end{bmatrix}
\end{aligned}
$$</span> 也可以表示为： <span
class="math display"><em>P</em><sup>′</sup> = <em>S</em> · <em>P</em></span>
其中，<span class="math inline"><em>S</em></span>
称为<strong>缩放矩阵</strong>。可以赋予 <span
class="math inline"><em>s</em><sub><em>x</em></sub></span> 和 <span
class="math inline"><em>s</em><sub><em>y</em></sub></span> 任意正值，当
<span class="math inline"><em>s</em><sub><em>x</em></sub></span> 或
<span class="math inline"><em>s</em><sub><em>y</em></sub></span>
的值大于 <span class="math inline">0</span> 的时候则是放大对象；当 <span
class="math inline"><em>s</em><sub><em>x</em></sub></span> 或 <span
class="math inline"><em>s</em><sub><em>y</em></sub></span> 的值小于
<span class="math inline">0</span> 的时候则是缩小对象。当 <span
class="math inline"><em>s</em><sub><em>x</em></sub> = <em>s</em><sub><em>y</em></sub></span>
的时候，对象的长和宽都缩放一样的比例，这种缩放称为<strong>一致缩放</strong>；反之，就是<strong>差值缩放</strong>。同时，还可以给
<span class="math inline"><em>s</em><sub><em>x</em></sub></span> 和
<span class="math inline"><em>s</em><sub><em>y</em></sub></span>
赋予负值，此时不仅会改变图像的尺寸，还会使其相对于一个或多个轴反射。</p>
<p>一件有意思的事情是，当使用上述公式对图像进行缩放时，如果 <span
class="math inline"><em>s</em><sub><em>x</em></sub>, <em>s</em><sub><em>y</em></sub> &lt; 1</span>，图像将会朝靠近原点的方向缩小；如果
<span
class="math inline"><em>s</em><sub><em>x</em></sub>, <em>s</em><sub><em>y</em></sub> &gt; 1</span>，图像将会朝原理原点的方向放大。也就是说，缩放操作不仅导致图像被缩放，还会导致图像被重定位。我们可以选择一个缩放后位置不变的点，称为<strong>固定点</strong>，来控制对象缩放的位置，使其不再向原点缩放。设固定点坐标为
<span
class="math inline">(<em>x</em><sub><em>f</em></sub>,<em>y</em><sub><em>f</em></sub>)</span>，得到下面的公式：
<span class="math display">$$
\begin{aligned}
x^\prime-x_f=(x-x_f)·s_x,\quad y^\prime-y_f=(y-y_f)·s_y
\end{aligned}
$$</span> 重新整理上述公式可得： <span class="math display">$$
\begin{aligned}
&amp;x^\prime=x·s_x+x_f(1-s_x)\\
&amp;y^\prime=y·s_y+y_f(1-s_y)
\end{aligned}
$$</span></p>
<h2 id="齐次坐标">04 齐次坐标</h2>
<p>我们可以尝试将平移、旋转、缩放的公式写到一起，就有： <span
class="math display"><em>P</em><sup>′</sup> = <em>M</em><sub>1</sub> · <em>P</em> + <em>M</em><sub>2</sub></span>
<span class="math inline"><em>M</em><sub>1</sub></span>
是旋转矩阵和缩放矩阵的乘积，是一个 2*2 的矩阵，<span
class="math inline"><em>M</em><sub>2</sub></span> 是平移矩阵，其大小为
1*2。对于纯平移操作，<span
class="math inline"><em>M</em><sub>1</sub></span>
是单位矩阵；对于纯旋转或缩放操作，<span
class="math inline"><em>M</em><sub>2</sub></span>
并不是零矩阵，而是提供了旋转中心和固定点的增量值。</p>
<p>出于提升性能的需要，我们希望尽可能使用矩阵乘法，消除矩阵加法，并且避免复合操作的中间过程，直接通过一个公式导出最终结果，为此，我们需要引入<strong>齐次坐标</strong>。齐次坐标是一种用
<span class="math inline"><em>N</em> + 1</span> 个数字来表示 <span
class="math inline"><em>N</em></span>
维坐标系的方法，对于二维坐标，其一般形式为 <span
class="math inline">(<em>x</em>,<em>y</em>,<em>w</em>)</span>，用于表示二维坐标
<span class="math inline">$(\frac xh,\frac yh)$</span>，其中，<span
class="math inline"><em>h</em></span>
称为<strong>齐次参数</strong>，一般为 <span
class="math inline">1</span>，对于不是 <span
class="math inline">1</span> 的齐次坐标，我们需要手动将其化为 <span
class="math inline">1</span>。</p>
<blockquote>
<p>齐次坐标对几何的影响十分深远，有了齐次坐标，我们甚至可以表示一个无穷远处的点，只需要将齐次参数设为
<span class="math inline">0</span>
即可。教材只介绍了齐次坐标的使用，并未介绍齐次坐标的原理，感兴趣可以自行了解。</p>
</blockquote>
<p>在引入了齐次坐标之后，我们可以重新表示二维坐标下的平移矩阵： <span
class="math display">$$
T=\begin{bmatrix} 1 &amp; 0 &amp; x_t \\ 0 &amp; 1 &amp; y_t \\ 0 &amp;
0 &amp; 1 \end{bmatrix}
$$</span> 二维平移方程可改为： <span class="math display">$$
\begin{bmatrix} x^\prime \\ y^\prime \\ 1 \end{bmatrix}=\begin{bmatrix}
1 &amp; 0 &amp; x_t \\ 0 &amp; 1 &amp; y_t \\ 0 &amp; 0 &amp; 1
\end{bmatrix}·\begin{bmatrix} x \\ y \\ 1 \end{bmatrix}
$$</span>
这样，我们就成功地将平移操作转换为了矩阵乘法。类似地，我们也可以二维旋转公式转换为矩阵形式：
<span class="math display">$$
\begin{bmatrix} x^\prime \\ y^\prime \\ 1 \end{bmatrix}=\begin{bmatrix}
\cos\theta &amp; -\sin\theta &amp; 0 \\ \sin\theta &amp; \cos\theta
&amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} x \\ y \\ 1
\end{bmatrix}
$$</span> 二维缩放公式： <span class="math display">$$
\begin{bmatrix} x^\prime \\ y^\prime \\ 1 \end{bmatrix}=\begin{bmatrix}
s_x &amp; 0 &amp; 0 \\ 0 &amp; s_y &amp; 0 \\ 0 &amp; 0 &amp; 1
\end{bmatrix}·\begin{bmatrix} x \\ y \\ 1 \end{bmatrix}
$$</span></p>
<h2 id="逆变换">05 逆变换</h2>
<p>如果我们需要将一个进行了平移后的对象还原回去，那就需要进行逆操作，逆平移矩阵为：
<span class="math display">$$
T^{-1}=\begin{bmatrix} 1 &amp; 0 &amp; -t_x \\ 0 &amp; 1 &amp; -t_y \\ 0
&amp; 0 &amp; 1 \end{bmatrix}
$$</span>
对于逆旋转操作，其实现方式只是将其旋转角度改为负值，显然这只会对 <span
class="math inline">sin </span> 产生影响： <span class="math display">$$
R^{-1}=\begin{bmatrix} \cos\theta &amp; \sin\theta &amp; 0 \\
-\sin\theta &amp; \cos\theta &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span> 而对于逆缩放，只需要对缩放系数取倒数即可： <span
class="math display">$$
S^{-1}=\begin{bmatrix} \frac{1}{s_x} &amp; 0 &amp; 0 \\ 0 &amp;
\frac{1}{s_y} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
<h2 id="复合变换">06 复合变换</h2>
<p><span class="math display">$$
P^\prime=M_1·M_2...M_n·P\\
\Downarrow\\
P^\prime=M·P
$$</span></p>
<p>在将所有操作都统一为矩阵乘法之后，我们可以单用一个矩阵 <span
class="math inline"><em>M</em></span>
来直接表示所有操作的复合，关于复合变换其实没什么好讲的，但这里有几条性质值得关注一下。</p>
<ol type="1">
<li>复合平移变换：<span
class="math inline"><em>T</em>(<em>t</em><sub>1<em>x</em></sub>,<em>t</em><sub>1<em>y</em></sub>) · <em>T</em>(<em>t</em><sub>2<em>x</em></sub>,<em>t</em><sub>2<em>y</em></sub>) = <em>T</em>(<em>t</em><sub>1<em>x</em></sub>+<em>t</em><sub>2<em>x</em></sub>,<em>t</em><sub>1<em>y</em></sub>+<em>t</em><sub>2<em>y</em></sub>)</span></li>
</ol>
<p><span class="math display">$$
\begin{bmatrix} 1 &amp; 0 &amp; t_{1x} \\ 0 &amp; 1 &amp; t_{1y} \\ 0
&amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 1 &amp; 0 &amp; t_{2x} \\
0 &amp; 1 &amp; t_{2y} \\ 0 &amp; 0 &amp; 1
\end{bmatrix}=\begin{bmatrix} 1 &amp; 0 &amp; t_{1x}+t_{2x} \\ 0 &amp; 1
&amp; t_{1y}+t_{2y} \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
<ol start="2" type="1">
<li>复合旋转变换：<span
class="math inline"><em>R</em>(<em>θ</em><sub>1</sub>) · <em>R</em>(<em>θ</em><sub>2</sub>) = <em>R</em>(<em>θ</em><sub>1</sub>+<em>θ</em><sub>2</sub>)</span></li>
</ol>
<p><span class="math display">$$
\begin{bmatrix} \cos\theta_1 &amp; -\sin\theta_1 &amp; 0 \\ \sin\theta_1
&amp; \cos\theta_1 &amp; 0 \\ 0 &amp; 0 &amp; 1
\end{bmatrix}·\begin{bmatrix} \cos\theta_2 &amp; -\sin\theta_2 &amp; 0
\\ \sin\theta_2 &amp; \cos\theta_2 &amp; 0 \\ 0 &amp; 0 &amp; 1
\end{bmatrix}=\begin{bmatrix} \cos(\theta_1+\theta_2) &amp;
-\sin(\theta_1+\theta_2) &amp; 0 \\ \sin(\theta_1+\theta_2) &amp;
\cos(\theta_1+\theta_2) &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
<ol start="3" type="1">
<li>复合缩放变换：<span
class="math inline"><em>S</em>(<em>s</em><sub>1<em>x</em></sub>,<em>s</em><sub>1<em>y</em></sub>) · <em>S</em>(<em>s</em><sub>2<em>x</em></sub>,<em>s</em><sub>2<em>y</em></sub>) = <em>S</em>(<em>s</em><sub>1<em>x</em></sub>·<em>s</em><sub>2<em>x</em></sub>,<em>s</em><sub>1<em>y</em></sub>·<em>s</em><sub>2<em>y</em></sub>)</span></li>
</ol>
<p><span class="math display">$$
\begin{bmatrix} s_{1x} &amp; 0 &amp; 0 \\ 0 &amp; s_{1y} &amp; 0 \\ 0
&amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} s_{2x} &amp; 0 &amp; 0 \\
0 &amp; s_{2y} &amp; 0 \\ 0 &amp; 0 &amp; 1
\end{bmatrix}=\begin{bmatrix} s_{1x}·s_{2x} &amp; 0 &amp; 0 \\ 0 &amp;
s_{1y}·s_{2y} &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
<ol start="4" type="1">
<li><p>基准点旋转</p>
<p>当工具包只支持围绕原点旋转时，我们可以使用如下方法实现围绕任意基准点
<span
class="math inline">(<em>x</em><sub><em>r</em></sub>,<em>y</em><sub><em>r</em></sub>)</span>
旋转：</p>
<ul>
<li>通过平移使对象的基准点回到原点</li>
<li>对对象进行旋转</li>
<li>通过逆平移使对象的基准点回到原来位置</li>
</ul>
<p>上述过程的图示如下：</p></li>
</ol>
<p><img src="/img/计算机图形学-18.png" /></p>
<p>复合变换矩阵表示为： <span class="math display">$$
\begin{bmatrix} 1 &amp; 0 &amp; x_{r} \\ 0 &amp; 1 &amp; y_{r} \\ 0
&amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} \cos\theta &amp;
-\sin\theta &amp; 0 \\ \sin\theta &amp; \cos\theta &amp; 0 \\ 0 &amp; 0
&amp; 1 \end{bmatrix}·\begin{bmatrix} 1 &amp; 0 &amp; -x_{r} \\ 0 &amp;
1 &amp; -y_{r} \\ 0 &amp; 0 &amp; 1 \end{bmatrix}=\begin{bmatrix}
\cos\theta &amp; -\sin\theta &amp; x_{r}(1-\cos\theta)+y_{r}\sin_\theta
\\ \sin\theta &amp; \cos\theta &amp;
y_{r}(1-\cos\theta)-x_{r}\sin_\theta \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
<ol start="5" type="1">
<li><p>基准点缩放</p>
<p>和围绕基准点旋转的方法一样，都是先将基准点调整至原点，缩放，然后再调整回去。复合变换矩阵表示为：</p></li>
</ol>
<p><span class="math display">$$
\begin{bmatrix} 1 &amp; 0 &amp; x_{r} \\ 0 &amp; 1 &amp; y_{r} \\ 0
&amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} s_x &amp; 0 &amp; 0 \\ 0
&amp; s_y &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 1
&amp; 0 &amp; -x_{r} \\ 0 &amp; 1 &amp; -y_{r} \\ 0 &amp; 0 &amp; 1
\end{bmatrix}=\begin{bmatrix} s_x &amp; 0 &amp; x_f(1-s_x) \\ 0 &amp;
s_y &amp; y_f(1-s_y) \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
<ol start="6" type="1">
<li><p>定向缩放</p>
<p>正常的 <span
class="math inline"><em>s</em><sub><em>x</em></sub></span> 和 <span
class="math inline"><em>s</em><sub><em>y</em></sub></span> 沿 x 轴和 y
轴缩放对象，但如果希望沿其他轴线缩放，可以使用类似基准点缩放的方法，即先将缩放轴线调整至与
x 轴或 y 轴重合再进行缩放，最后再调整回来。如下图所示：</p>
<p><img src="/img/计算机图形学-20.png" /></p>
<p>复合变换矩阵表示为：</p></li>
</ol>
<p><span class="math display">$$
R^{-1}(\theta)·S(s_1,s_2)·R(\theta)=\begin{bmatrix}
s_1\cos^2\theta+s_2\sin^2\theta &amp; (s_2-s_1)\cos\theta\sin\theta
&amp; 0 \\ (s_2-s_1)\cos\theta\sin\theta &amp;
s_1\sin^2\theta+s_2\cos^2\theta &amp; 0 \\ 0 &amp; 0 &amp; 1
\end{bmatrix}
$$</span></p>
<p>另外，按照矩阵乘法的结合性质，<span
class="math inline"><em>M</em><sub>1</sub> · <em>M</em><sub>2</sub> · <em>M</em><sub>3</sub> = (<em>M</em><sub>1</sub>·<em>M</em><sub>2</sub>) · <em>M</em><sub>3</sub> = <em>M</em><sub>1</sub> · (<em>M</em><sub>2</sub>·<em>M</em><sub>3</sub>)</span>；但是，变换积一般不可交换顺序，也就是
<span
class="math inline"><em>M</em><sub>1</sub> · <em>M</em><sub>2</sub> ≠ <em>M</em><sub>2</sub> · <em>M</em><sub>1</sub></span>，除非所进行的复合变换属于同种变换。</p>
<h2 id="错切">07 错切</h2>
<p>错切是指，将某一点沿 x 轴 (或 y 轴) 方向移动其与 y 轴 (或 x 轴)
距离的某一倍数，定义错切参数 <span
class="math inline">sh<sub><em>x</em></sub></span>、<span
class="math inline">sh<sub><em>y</em></sub></span>，则有： <span
class="math display">$$
\begin{aligned}
x^\prime=x+y·\operatorname{sh}_x\\
y^\prime=y+x·\operatorname{sh}_y
\end{aligned}
$$</span> 错切的变换矩阵为： <span class="math display">$$
\begin{bmatrix} 1 &amp; \operatorname{sh}_{x} &amp; 0 \\
\operatorname{sh}_{y} &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 1\end{bmatrix}
$$</span> 如果想做相对于其他参考线的错切，可以使用下面的变换矩阵： <span
class="math display">$$
\begin{bmatrix} 1 &amp; \operatorname{sh}_{x} &amp;
-\operatorname{sh}_x·y_{ref} \\ \operatorname{sh}_{y} &amp; 1 &amp;
-\operatorname{sh}_y·x_{ref} \\ 0 &amp; 0 &amp; 1\end{bmatrix}
$$</span> 这样，错切方程将会变为： <span class="math display">$$
\begin{aligned}
&amp;x^\prime=x+\operatorname{sh}_{x}(y-y_{ref})\\
&amp;y^\prime=y+\operatorname{sh}_y(x-x_{ref})
\end{aligned}
$$</span></p>
<h2 id="作业">08 作业</h2>
<blockquote>
<p>将正方形 <span
class="math inline"><em>A</em>(0,0)、<em>B</em>(0,1)、<em>C</em>(1,1)、<em>D</em>(1,0)</span>，放大
<span class="math inline">2</span> 倍，并保持 <span
class="math inline"><em>C</em>(1,1)</span>
位置不变，请给出变换矩阵以及对应的正方形顶点坐标。</p>
</blockquote>
<p>将正方形 <span
class="math inline"><em>A</em><em>B</em><em>C</em><em>D</em></span> 放大
<span class="math inline">2</span> 倍且要保持 <span
class="math inline"><em>C</em></span> 点位置不变，即以 <span
class="math inline"><em>C</em></span> 点为基准点进行缩放，变换矩阵为：
<span class="math display">$$
M=\begin{bmatrix} 1 &amp; 0 &amp; 1 \\ 0 &amp; 1 &amp; 1 \\ 0 &amp; 0
&amp; 1 \end{bmatrix}·\begin{bmatrix} 2 &amp; 0 &amp; 0 \\ 0 &amp; 2
&amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 1 &amp; 0
&amp; -1 \\ 0 &amp; 1 &amp; -1 \\ 0 &amp; 0 &amp; 1
\end{bmatrix}=\begin{bmatrix} 2 &amp; 0 &amp; -1 \\ 0 &amp; 2 &amp; -1
\\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span> 对答案进行检验： <span class="math display">$$
\begin{aligned}
&amp;A^\prime=\begin{bmatrix} 2 &amp; 0 &amp; -1 \\ 0 &amp; 2 &amp; -1
\\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 0
\\ 0 \\ 1 \end{bmatrix}=\begin{bmatrix} -1 \\ -1 \\ 1 \end{bmatrix}\\
&amp;B^\prime=\begin{bmatrix} 2 &amp; 0 &amp; -1 \\ 0 &amp; 2 &amp; -1
\\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 0
\\ 1 \\ 1 \end{bmatrix}=\begin{bmatrix} -1 \\ 1 \\ 1 \end{bmatrix}\\
&amp;C^\prime=\begin{bmatrix} 2 &amp; 0 &amp; -1 \\ 0 &amp; 2 &amp; -1
\\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 1 \\ 1 \\ 1
\end{bmatrix}=\begin{bmatrix} 1 \\ 1 \\ 1 \end{bmatrix}\\
&amp;D^\prime=\begin{bmatrix} 2 &amp; 0 &amp; -1 \\ 0 &amp; 2 &amp; -1
\\ 0 &amp; 0 &amp; 1 \end{bmatrix}·\begin{bmatrix} 1
\\ 0 \\ 1 \end{bmatrix}=\begin{bmatrix} 1 \\ -1 \\ 1 \end{bmatrix}
\end{aligned}
$$</span> 画出图像：</p>
<p><img src="/img/计算机图形学-19.png" /></p>
<hr />
<blockquote>
<p>正方形 <span
class="math inline"><em>A</em>(0,0)、<em>B</em>(0,1)、<em>C</em>(1,1)、<em>D</em>(1,0)</span>
经过变换后的坐标分别对应为 <span
class="math inline">(0,0)、(0.5,1.5)、(2,2)、(1.5,0.5)</span>。请给出变换矩阵。</p>
</blockquote>
<p>画出变换之后的图像可以发现，是由原图像沿右对角线定向缩放得到的，此时应该设定
<span class="math inline"><em>θ</em> = 45°</span>，<span
class="math inline"><em>s</em><sub><em>x</em></sub> = 1</span>，<span
class="math inline"><em>s</em><sub><em>y</em></sub> = 2</span>，<span
class="math inline"><em>θ</em></span> 为 <span
class="math inline">45°</span> 是因为对角线想要逆时针旋转到 y 轴需要旋转
<span class="math inline">45°</span>，而 <span
class="math inline"><em>s</em><sub><em>x</em></sub></span> 和 <span
class="math inline"><em>s</em><sub><em>y</em></sub></span>
是如何确定的呢？我们将原图像逆时针旋转 <span
class="math inline">45°</span>
后，计算出每个点的坐标，再将变换后的图像也逆时针旋转 <span
class="math inline">45°</span>，也计算出各点的坐标，然后计算每个轴上缩放的比例即可。计算完比例之后，根据定向缩放的公式，得到：
<span class="math display">$$
M=R^{-1}(45°)·S(1,2)·R(45°)=\begin{bmatrix} 1.5 &amp; 0.5 &amp; 0 \\ 0.5
&amp; 1.5 &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
$$</span>
上面演示的是带公式的方法，还有一种更简单的方法是，利用矩阵<strong>逆运算</strong>：
<span class="math display">$$
\begin{aligned}
&amp;M·\begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 1 \\ 0 &amp; 1 &amp; 1
&amp; 0 \\ 1 &amp; 1 &amp; 1 &amp; 1 \end{bmatrix}=\begin{bmatrix} 0
&amp; 0.5 &amp; 2 &amp; 1.5 \\ 0 &amp; 1.5 &amp; 2 &amp; 0.5 \\ 1 &amp;
1 &amp; 1 &amp; 1 \end{bmatrix}\\\\
&amp;M=\begin{bmatrix} 0 &amp; 0.5 &amp; 2 &amp; 1.5 \\ 0 &amp; 1.5
&amp; 2 &amp; 0.5 \\ 1 &amp; 1 &amp; 1 &amp; 1
\end{bmatrix}·\begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 1 \\ 0 &amp; 1
&amp; 1 &amp; 0 \\ 1 &amp; 1 &amp; 1 &amp; 1 \end{bmatrix}^{-1}
\end{aligned}
$$</span> 解得变换矩阵仍然为： <span class="math display">$$
M=\begin{bmatrix} 1.5 &amp; 0.5 &amp; 0 \\ 0.5 &amp; 1.5 &amp; 0 \\ 0
&amp; 0 &amp; 1 \end{bmatrix}
$$</span></p>
	  
	</div>

	<!-- recommended posts -->
	

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
		<li class="prev"><a href="/2023/12/11/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
          <li class="next"><a href="/2023/12/10/%E5%A1%AB%E5%85%85%E7%AE%97%E6%B3%95/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        
    <div class="bdsharebuttonbox">
        <a href="#" class="bds_more" data-cmd="more"></a>
        <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
        <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
        <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
        <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
        <a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
        <a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a>
        <a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a>
        <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
    </div>
    <script>
        window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};
        with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>


        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">Comments</h2>
  
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2023-12-11 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/Computer-Graphics/">Computer Graphics<span>4</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/computer-science/">computer science<span>4</span></a></li>

    </ul>
	</div>
	

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
			<ol class="toc-article"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%B9%B3%E7%A7%BB"><span class="toc-article-text">01 平移</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%97%8B%E8%BD%AC"><span class="toc-article-text">02 旋转</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%BC%A9%E6%94%BE"><span class="toc-article-text">03 缩放</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E9%BD%90%E6%AC%A1%E5%9D%90%E6%A0%87"><span class="toc-article-text">04 齐次坐标</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E9%80%86%E5%8F%98%E6%8D%A2"><span class="toc-article-text">05 逆变换</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%A4%8D%E5%90%88%E5%8F%98%E6%8D%A2"><span class="toc-article-text">06 复合变换</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E9%94%99%E5%88%87"><span class="toc-article-text">07 错切</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E4%BD%9C%E4%B8%9A"><span class="toc-article-text">08 作业</span></a></li></ol>
		</div>
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->




    </div>
  </div>
  <div class="container-narrow">
    <footer> <!--<p>
  &copy; 2025 me
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p>-->
 </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
	<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</html>